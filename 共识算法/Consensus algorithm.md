## 拜占庭将军问题（Byzantine failures）

1. 拜占庭将军问题提出与约束条件

## 共识系统

1. 分布式系统中关于拜占庭缺陷和故障的定义
    1. 拜占庭缺陷（Byzantine Fault）：任何从不同观察者角度看表现出不同症状的缺陷。
    2. 拜占庭故障（Byzantine Failure）：在需要共识的系统中由于拜占庭缺陷导致丧失服务。
    3. 宕机缺陷（Fail-Stop Fault）：在需要共识的系统中导致进程停止运行发生的缺陷；该缺陷不对系统产生其他副作用。
    4. 宕机恢复故障（Fail-Recovery Failure）：在需要共识的系统中导致进程停止运行发生的故障；该故障在重启进程后恢复，不对系统产生其他副作用。

            拜占庭缺陷或故障是最严重的缺陷与故障。拜占庭缺陷具有不可预测、任意性的特点。

2. 共识问题就是要寻找一个算法与协议，使得该协议满足以下三个属性：
    1. 一致性（Agreement）：所有的非缺陷进程都必须同意同一个值。
    2. 正确性（Validity）：所有非缺陷进程所统一的值必须来自非故障进程所提议的值。
    3. 可结束性（Termination）：每个非缺陷的进程必须最终确定一个值。
   
            通常将一致性和正确性称之为安全性（Safety），而满足可结束性称为活性（Liveness）。
            大部分使用的异步通信网络下的共识算法，往往不能保证在有限的时间内总是能达成共识。

## FLP(Fisher-Lynch-Paterson) 定理

>在一个多进程异步系统中，只要有一个进程不可靠，那么就不存在一个协议，能保证有限时间内使所有进程达成一致。

## CAP 定理

>一个分布式数据库系统有三个需要的属性：任意一个数据共享系统，最多只能满足其中之二。
>>1. 对网络分隔的容忍(partition tolerance)
>>2. 一致性(consistency)
>>3. 可用性(availability)

### 对三个属性的严格定义

1. Consistency：（数据对象原子性）在所有的操作中，必须有一个完整的顺序存在使得每个操作就像在单个实体上完成。在一个分布式多节点环境中，这意味着所有发生在一个写操作完成之后的读操作都必须返回该写操作写入的值。
2. Availability：每个非故障节点在收到请求后必须有回应。这意味着服务用的任何算法最后都必须能终止。
3. Partition Tolerance：可以容忍网络丢失从一个节点发到另一节点任意多的消息。

        FLP是关于分布式系统的共识问题，这和CAP中的一致性有些相似，但CAP主要讨论关于原子性数据存储的一致性，以及和可用性的关系。

## 强一致性非拜占庭共识算法

### Viewstamped Replicaton
        主要用于在分布式系统状态复制服务。